\documentclass[a4paper, 11pt, titlepage, twoside, openany]{book}
\usepackage{plain}
\usepackage{setspace}
% Layout
\usepackage[
  paperheight=29.7cm,
  paperwidth=21cm,
  outer=1.5cm,
  inner=2.5cm,
  top=2cm,
  bottom=2cm
]{geometry}
% Chapter
\usepackage{titlesec}
\singlespacing
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
% Letter
\usepackage[utf8]{inputenc}
\usepackage{bold-extra}
% Language
\usepackage[english]{babel}
% Icons
\usepackage{fontawesome}
% PDF/A
\usepackage[a-1b]{pdfx}
% Image
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{stackengine}
\usepackage{etoolbox}
\BeforeBeginEnvironment{wrapfigure}{\setlength{\intextsep}{0pt}}
% Hyperlink
\usepackage{xurl}
\usepackage[pdfa]{hyperref}
\hypersetup{breaklinks=true}
% Quote
\usepackage{csquotes}
\usepackage{epigraph}
\renewcommand{\mkbegdispquote}[2]{\itshape}
% Table
\usepackage{makecell}
\usepackage{xltabular}
\usepackage{hhline}
\usepackage{colortbl}
\usepackage{packages/slashbox}
\usepackage{caption}
\captionsetup[table]{position=bottom}
% List
\usepackage{enumitem}
% Color
\usepackage{xcolor}
\definecolor{gray}{RGB}{102,102,102}
\definecolor{green}{RGB}{0,153,0}
\definecolor{red}{RGB}{196,122,91}
\definecolor{bulmaBlue}{RGB}{32,156,238}
\definecolor{bulmaGreen}{RGB}{72,199,116}
\definecolor{bulmaRed}{RGB}{255,56,96}
\definecolor{ermBlue}{RGB}{218,232,252}
\definecolor{ermGray}{RGB}{245,245,245}
\definecolor{shellGray}{RGB}{160,161,167}
\definecolor{shellBlue}{RGB}{64,120,242}
\definecolor{shellRed}{RGB}{228,86,73}
\definecolor{shellOrange}{RGB}{209,154,102}
\definecolor{shellGreen}{RGB}{80,161,79}
\definecolor{shellPurple}{RGB}{166,38,164}
\definecolor{iniOrange}{RGB}{209,154,102}
\definecolor{iniBlue}{RGB}{64,120,242}
\definecolor{iniGray}{RGB}{56,58,66}
\definecolor{prometheusOrange}{RGB}{209,154,102}
\definecolor{prometheusBlue}{RGB}{64,120,242}
\definecolor{prometheusGray}{RGB}{160,161,167}
\definecolor{prometheusGreen}{RGB}{80,161,79}
\definecolor{promqlPurple}{RGB}{166,38,164}
\definecolor{promqlOrange}{RGB}{209,154,102}
\definecolor{promqlBlue}{RGB}{64,120,242}
\definecolor{promqlRed}{RGB}{228,86,73}
\definecolor{promqlGreen}{RGB}{80,161,79}
\definecolor{yamlPurple}{RGB}{166,38,164}
\definecolor{yamlBlue}{RGB}{64,120,242}
\definecolor{yamlOrange}{RGB}{209,154,102}
\definecolor{yamlGreen}{RGB}{80,161,79}
\definecolor{yamlGray}{RGB}{160,161,167}
\definecolor{typescriptGreen}{RGB}{80,161,79}
\definecolor{typescriptGray}{RGB}{160,161,167}
\definecolor{typescriptRed}{RGB}{228,86,73}
\definecolor{typescriptBlue}{RGB}{64,120,242}
\definecolor{typescriptPurple}{RGB}{166,38,164}
\definecolor{graphqlPurple}{RGB}{166,38,164}
\definecolor{graphqlGreen}{RGB}{80,161,79}
\definecolor{graphqlOrange}{RGB}{209,154,102}
\definecolor{graphqlGray}{RGB}{160,161,167}
\definecolor{graphqlBlue}{RGB}{64,120,242}
% Code
\usepackage{listings}
\usepackage{lstautogobble}
\usepackage{tikz}
\newcommand*{\circled}[1]{\tikz[baseline=(char.base)]{ \node[draw, shape=circle, inner sep=1pt, fill=black, text=white] (char) {#1};}}
\newcommand*{\icircled}[1]{\tikz[baseline=(char.base)]{ \node[draw, shape=circle, inner sep=1pt, line width=0.2pt] (char) {#1};}}


\def\beginlstdelim#1#2#3%
{%
\def\endlstdelim{#2\egroup}%
\fontencoding{T1}\ttfamily\color{#3}#1\bgroup\aftergroup\endlstdelim%
}

\lstset{ %
basicstyle=\ttfamily\footnotesize, %
columns=fullflexible, %
showstringspaces=false, %
numbers=left, %
numberstyle=\tiny\color{gray}, %
numbersep=5pt, %
backgroundcolor=\color{white}, %
showspaces=false, %
showtabs=false, %
frame=lines, %
rulecolor=\color{black}, %
tabsize=2, %
captionpos=b, %
breaklines=true, %
breakatwhitespace=false, %
keepspaces=true, %
title=\lstname, %
commentstyle=\color{green}\upshape, %
autogobble=true, %
upquote=true, %
keywordstyle=\bfseries %
}

\lstdefinelanguage{shell}
{ %
language=sh, %
alsoletter={-, +}, %
deletekeywords={set}, %
keywordstyle=\color{shellPurple}, %
morekeywords=[2]{set, rm, curl, sh, source, printf}, %
keywordstyle=[2]\color{shellRed}, %
morekeywords=[3]{-o, +o, -f}, %
keywordstyle=[3]\color{shellOrange}, %
keywordstyle=[4]\color{shellBlue}, %
moredelim = **[is][\beginlstdelim{\$\{\{}{\}\}}{shellPurple}]{\$\{\{}{\}\}}, %
stringstyle=\color{shellGreen}, %
commentstyle=\color{shellGray}\upshape %
}

\lstdefinelanguage{ini}
{ %
literate={{=}{{\textcolor{iniGray}{=}}}1}, %
keywordstyle=\color{iniBlue}, %
morecomment=[s][\color{iniOrange}]{[}{]}, %
morecomment=[l]{;} %
}

\lstdefinelanguage{prometheus}
{ %
keywordstyle=\color{prometheusOrange}, %
keywordstyle=[2]\color{prometheusBlue}, %
morestring=[b]", %
stringstyle=\color{prometheusGreen}, %
comment=[l]{\#}, %
commentstyle=\color{prometheusGray}\upshape %
}

\lstdefinelanguage{promql}
{ %
morekeywords={avg, without, rate}, %
keywordstyle=\color{promqlPurple}, %
keywordstyle=[2]\color{promqlOrange}, %
keywordstyle=[3]\color{promqlBlue}, %
keywordstyle=[4]\color{promqlRed}, %
morestring=[b]", %
stringstyle=\color{promqlGreen}, %
}

\lstdefinelanguage{yaml}
{ %
keywords={true, false, null}, %
keywordstyle=\color{yamlOrange}, %
keywordstyle=[2]\color{yamlBlue}, %
moredelim = **[is][\beginlstdelim{\$\{\{}{\}\}}{yamlPurple}]{\$\{\{}{\}\}}, %
morestring=[b]', %
morestring=*[b]", %
stringstyle=\color{yamlGreen}, %
comment=[l]{\#}, %
morecomment=[s]{/*}{*/}, %
commentstyle=\color{yamlGray}\upshape %
}

\lstdefinelanguage{typescript}
{ %
keywords={await, typeof, const, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break, class, export, boolean, throw, implements, import, this}, %
keywordstyle=\color{typescriptPurple}, %
keywordstyle=[2]\color{typescriptBlue}, %
keywordstyle=[3]\color{typescriptRed}, %
morestring=[b]', %
morestring=[b]", %
stringstyle=\color{typescriptGreen}, %
comment=[l]{//}, %
morecomment=[s]{/*}{*/}, %
commentstyle=\color{typescriptGray}\upshape %
}

\lstdefinelanguage{graphql}
{ %
morekeywords={directive, on, enum, type}, %
keywordstyle=\color{graphqlPurple}, %
morekeywords=[2]{String, Int, Float, Boolean, Query, Mutation, Subscription}, %
keywordstyle=[2]\color{graphqlOrange}, %
morekeywords=[3]{FIELD, FIELD_DEFINITION, OBJECT}, %
keywordstyle=[3]\color{graphqlGreen}, %
keywordstyle=[4]\color{graphqlBlue}, %
morecomment=[l]{\#}, %
morecomment=[s]{"""}{"""}, %
commentstyle=\color{graphqlGray}\upshape %
}

% Document
\begin{document}
  % Cover
  \pagenumbering{gobble}
  \input{etc/cover}
  \clearpage


  % Acknowledgements
  \input{etc/acknowledgements}
  \clearpage
  \pagestyle{plain}


  % Index
  \frontmatter
  \pagenumbering{Roman}
  \tableofcontents
  \clearpage


  % Start page numbering
  \mainmatter


  % Group to define space between chapters
  \begingroup
  % Override format of title chapter
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{\thechapter}{1em}{} \titlespacing*{\chapter}{0pt}{0.59in}{0.02in}
  \titlespacing*{\section}{0pt}{0.20in}{0.02in} \titlespacing*{\subsection}{0pt}{0.10in}{0.02in}
  \titlespacing*{\subsubsection}{0pt}{0.05in}{0.02in}

  % Abstract
  \input{etc/abstract}


  % Chapters
  \input{chapters/introduction.tex}
  \input{chapters/state_of_the_art.tex}
  \input{chapters/architecture.tex}
  \input{chapters/implementation.tex}
  \input{chapters/analysis.tex}


  % Conclusions
  \input{etc/conclusions.tex}


  \endgroup

  % Bibliography
  \addcontentsline{toc}{chapter}{Bibliography}
  % Alphabetical order of authors
  \bibliographystyle{plain}
  \bibliography{bibliography}


  % Attachments
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{Appendix \thechapter}{1em}{}
  \appendix
  \input{attachments/corollary_projects.tex}
  \input{attachments/good_practices.tex}
  \input{attachments/logging.tex}
\end{document}