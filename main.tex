\documentclass[a4paper, 11pt, titlepage, twoside, openany]{book}
\usepackage{plain}
\usepackage{setspace}
% Layout
\usepackage[
  paperheight=29.7cm,
  paperwidth=21cm,
  outer=1.5cm,
  inner=2.5cm,
  top=2cm,
  bottom=2cm
]{geometry}
% Chapter
\usepackage{titlesec}
\singlespacing
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
% Letter
\usepackage[utf8]{inputenc}
\usepackage{bold-extra}
% Language
\usepackage[english]{babel}
% Icons
\usepackage{fontawesome}
% PDF/A
\usepackage[a-1b]{pdfx}
% Image
\usepackage{graphicx}
\usepackage{wrapfig}
% Hyperlink
\usepackage{xurl}
\usepackage[pdfa]{hyperref}
\hypersetup{breaklinks=true}
% Quote
\usepackage{csquotes}
\usepackage{epigraph}
\renewcommand{\mkbegdispquote}[2]{\itshape}
% Table
\usepackage{makecell}
\usepackage{xltabular}
\usepackage{caption}
\captionsetup[table]{position=bottom}
% List
\usepackage{enumitem}
% Code
\usepackage{listings}
\usepackage{lstautogobble}
\usepackage{xcolor}
\definecolor{aquamarine}{RGB}{38,127,153}
\definecolor{blue}{RGB}{0,0,255}
\definecolor{bluedark}{RGB}{0,16,128}
\definecolor{bulmablue}{RGB}{32,156,238}
\definecolor{bulmagreen}{RGB}{72,199,116}
\definecolor{bulmared}{RGB}{255,56,96}
\definecolor{gold}{RGB}{121,94,38}
\definecolor{gray}{RGB}{102,102,102}
\definecolor{green}{RGB}{0,153,0}
\definecolor{red}{RGB}{196,122,91}
\lstset{ %
basicstyle=\ttfamily\footnotesize, %
columns=fullflexible, %
showstringspaces=false, %
numbers=left, %
numberstyle=\tiny\color{gray}, %
numbersep=5pt, %
backgroundcolor=\color{white}, %
showspaces=false, %
showstringspaces=false, %
showtabs=false, %
stringstyle=\color{red}, %
frame=lines, %
rulecolor=\color{black}, %
tabsize=2, %
captionpos=b, %
breaklines=true, %
breakatwhitespace=false, %
keepspaces=true, %
title=\lstname, %
commentstyle=\color{green}\upshape, %
autogobble=true, %
keywordstyle=\bfseries %
}

\lstdefinelanguage{graphql}
{ %
literate={{[}{{\textcolor{gray}{[}}}1{]}{{\textcolor{gray}{]}}}1}, %
morekeywords={directive, on, enum, type, ADMIN, SIMPLE, VIEW, EDIT}, %
keywordstyle=\color{blue}, %
morekeywords=[2]{@auth}, %
keywordstyle=[2]\color{gold}, %
morekeywords=[3]{String, Int, Float, Boolean, Role, Permission, ExampleType, Query, FIELD, FIELD\_DEFINITION, OBJECT}, %
keywordstyle=[3]\color{aquamarine}, %
morekeywords=[4]{roles, permissions, protected, unprotected, secret, arg}, %
keywordstyle=[4]\color{bluedark}, %
morekeywords=[5]{[, ]}, %
keywordstyle=[5]\color{green}, %
morecomment=[s]{"""}{"""} %
}

% Document
\begin{document}
  % Cover
  \pagenumbering{gobble}
  \input{etc/cover}
  \clearpage


  % Acknowledgements
  \input{etc/acknowledgements}
  \clearpage
  \pagestyle{plain}


  % Start page numbering
  \mainmatter


  % Index
  \tableofcontents
  \clearpage


  % Group to define space between chapters
  \begingroup
  % No page break between chapters
  % Override clear page commands
  % TODO Page break between chapters
  %\renewcommand{\cleardoublepage}{}
  %\renewcommand{\clearpage}{}
  % Override format of title chapter
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{\thechapter}{1em}{} \titlespacing*{\chapter}{0pt}{0.59in}{0.02in}
  \titlespacing*{\section}{0pt}{0.20in}{0.02in} \titlespacing*{\subsection}{0pt}{0.10in}{0.02in}
  \titlespacing*{\subsubsection}{0pt}{0.05in}{0.02in}

  % Abstract
  \input{etc/abstract}


  % Chapters
  \input{chapters/introduction.tex}
  \input{chapters/state_of_the_art.tex}
  \input{chapters/architecture.tex}
  \input{chapters/implementation.tex}
  \input{chapters/analysis.tex}


  % Conclusions
  \input{etc/conclusions.tex}


  \endgroup

  % Bibliography
  \addcontentsline{toc}{chapter}{Bibliography}
  % Alphabetical order of authors
  \bibliographystyle{plain}
  \bibliography{bibliography}


  % Attachments
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{Appendix \thechapter}{1em}{}
  \appendix
  \input{attachments/good_practices.tex}
  \input{attachments/corollary_projects.tex}
  \input{attachments/upstream_contributions.tex}
\end{document}