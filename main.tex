\documentclass[a4paper, 11pt, titlepage, twoside, openany]{book}
\usepackage{plain}
\usepackage{setspace}
% Layout
\usepackage[
  paperheight=29.7cm,
  paperwidth=21cm,
  outer=1.5cm,
  inner=2.5cm,
  top=2cm,
  bottom=2cm
]{geometry}
% Chapter
\usepackage{titlesec}
\singlespacing
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
% Letter
\usepackage[utf8]{inputenc}
\usepackage{bold-extra}
% Language
\usepackage[english]{babel}
% Icons
\usepackage{fontawesome}
% PDF/A
\usepackage[a-1b]{pdfx}
% Image
\usepackage{graphicx}
\usepackage{wrapfig}
% Hyperlink
\usepackage{xurl}
\usepackage[pdfa]{hyperref}
\hypersetup{breaklinks=true}
% Quote
\usepackage{csquotes}
\usepackage{epigraph}
\renewcommand{\mkbegdispquote}[2]{\itshape}
% Table
\usepackage{makecell}
\usepackage{xltabular}
\usepackage{caption}
\captionsetup[table]{position=bottom}
% List
\usepackage{enumitem}
% Code
\usepackage{listings}
\usepackage{lstautogobble}
\usepackage{xcolor}
\definecolor{bulmaBlue}{RGB}{32,156,238}
\definecolor{bulmaGreen}{RGB}{72,199,116}
\definecolor{bulmaRed}{RGB}{255,56,96}
\definecolor{gray}{RGB}{102,102,102}
\definecolor{green}{RGB}{0,153,0}
\definecolor{red}{RGB}{196,122,91}


\lstset{ %
basicstyle=\ttfamily\footnotesize, %
columns=fullflexible, %
showstringspaces=false, %
numbers=left, %
numberstyle=\tiny\color{gray}, %
numbersep=5pt, %
backgroundcolor=\color{white}, %
showspaces=false, %
showstringspaces=false, %
showtabs=false, %
stringstyle=\color{red}, %
frame=lines, %
rulecolor=\color{black}, %
tabsize=2, %
captionpos=b, %
breaklines=true, %
breakatwhitespace=false, %
keepspaces=true, %
title=\lstname, %
commentstyle=\color{green}\upshape, %
autogobble=true, %
keywordstyle=\bfseries %
}

\definecolor{shellGray}{RGB}{160,161,167}
\definecolor{shellBlue}{RGB}{64,120,242}
\definecolor{shellRed}{RGB}{228,86,73}
\definecolor{shellOrange}{RGB}{209,154,102}
\definecolor{shellGreen}{RGB}{80,161,79}
\definecolor{shellPurple}{RGB}{166,38,164}
\lstdefinelanguage{shell}
{ %
language=sh, %
alsoletter={-, +}, %
deletekeywords={set}, %
keywordstyle=\color{shellPurple}, %
morekeywords=[2]{set, rm, curl, sh, source, printf}, %
keywordstyle=[2]\color{shellRed}, %
morekeywords=[3]{-o, +o, -f}, %
keywordstyle=[3]\color{shellOrange}, %
keywordstyle=[4]\color{shellBlue}, %
stringstyle=\color{shellGreen}, %
commentstyle=\color{shellGray}\upshape %
}

\definecolor{iniOrange}{RGB}{209,154,102}
\definecolor{iniBlue}{RGB}{64,120,242}
\definecolor{iniGray}{RGB}{56,58,66}
\lstdefinelanguage{ini}
{ %
literate={{=}{{\textcolor{iniGray}{=}}}1}, %
keywordstyle=\color{iniBlue}, %
morecomment=[s][\color{iniOrange}]{[}{]}, %
morecomment=[l]{;} %
}

\definecolor{graphqlPurple}{RGB}{166,38,164}
\definecolor{graphqlGreen}{RGB}{80,161,79}
\definecolor{graphqlOrange}{RGB}{209,154,102}
\definecolor{graphqlGray}{RGB}{160,161,167}
\definecolor{graphqlBlue}{RGB}{64,120,242}
\lstdefinelanguage{graphql}
{ %
morekeywords={directive, on, enum, type}, %
keywordstyle=\color{graphqlPurple}, %
morekeywords=[2]{String, Int, Float, Boolean, Query, Mutation, Subscription}, %
keywordstyle=[2]\color{graphqlOrange}, %
morekeywords=[3]{FIELD, FIELD_DEFINITION, OBJECT}, %
keywordstyle=[3]\color{graphqlGreen}, %
keywordstyle=[4]\color{graphqlBlue}, %
morecomment=[l]{\#}, %
morecomment=[s]{"""}{"""}, %
commentstyle=\color{graphqlGray}\upshape %
}

% Document
\begin{document}
  % Cover
  \pagenumbering{gobble}
  \input{etc/cover}
  \clearpage


  % Acknowledgements
  \input{etc/acknowledgements}
  \clearpage
  \pagestyle{plain}


  % Start page numbering
  \mainmatter


  % Index
  \tableofcontents
  \clearpage


  % Group to define space between chapters
  \begingroup
  % No page break between chapters
  % Override clear page commands
  % TODO Page break between chapters
  %\renewcommand{\cleardoublepage}{}
  %\renewcommand{\clearpage}{}
  % Override format of title chapter
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{\thechapter}{1em}{} \titlespacing*{\chapter}{0pt}{0.59in}{0.02in}
  \titlespacing*{\section}{0pt}{0.20in}{0.02in} \titlespacing*{\subsection}{0pt}{0.10in}{0.02in}
  \titlespacing*{\subsubsection}{0pt}{0.05in}{0.02in}

  % Abstract
  \input{etc/abstract}


  % Chapters
  \input{chapters/introduction.tex}
  \input{chapters/state_of_the_art.tex}
  \input{chapters/architecture.tex}
  \input{chapters/implementation.tex}
  \input{chapters/analysis.tex}


  % Conclusions
  \input{etc/conclusions.tex}


  \endgroup

  % Bibliography
  \addcontentsline{toc}{chapter}{Bibliography}
  % Alphabetical order of authors
  \bibliographystyle{plain}
  \bibliography{bibliography}


  % Attachments
  \titleformat{\chapter} {\normalfont\Huge\bfseries}{Appendix \thechapter}{1em}{}
  \appendix
  \input{attachments/good_practices.tex}
  \input{attachments/corollary_projects.tex}
  \input{attachments/upstream_contributions.tex}
\end{document}